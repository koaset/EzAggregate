{
	"database": {
		"url":  "mongodb://localhost:27017/",
		"name": "test",
		"stores": [ 
			"banana_store"
		],
		"cleanup": {
			"ms_interval": 60000,
			"max_age": "20s"
		}
	},
	"restapi" : {
		"source_port": "8079",
		"output_port": "8080"
	},
	"rabbitmq" : {
		"url": "amqp://localhost"
	},
	"sources": [
		{
			"name": "banana_source",
			"type": "restapi",
			"store": "banana_store",
			"path": "/bananas",
			"fields": {
				"user_id": "string",
				"name": "string",
				"num_bananas": "number"
			}
		},
		{
			"name": "banana_mq",
			"type": "rabbitmq",
			"exchange": "test_exchange",
			"queue": "test_queue",
			"routing_key": "banana_key",
			"store": "banana_store",
			"fields": {
				"user_id": "string",
				"name": "string",
				"num_bananas": "number"
			}
		}
	],
	"outputs": [
		{
			"name": "bananapi",
			"type": "restapi",
			"path": "/bananas",
			"store": "banana_store",
			"aggregation": {
				"name": "sum_bananas",
				"key": "user_id",
				"field": "num_bananas",
				"action": "sum",
				"order_by": "sum_bananas",
				"invert": true
			},
			"time_options": {
				"field": "timestamp",
				"max_age": "10s"
			}
		},
		{
			"name": "bananapi_all",
			"type": "restapi",
			"path": "/bananas/all",
			"store": "banana_store"
		}
	]
}
