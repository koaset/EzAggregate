{
	"database": {
		"url":  "mongodb://localhost:27017/",
		"name": "test",
		"stores": [ 
			{
				"name": "banana_store",
				"fields": {
					"user_id": "string",
					"name": "string",
					"num_bananas": "number"
				},
				"cleanup": {
					"ms_interval": 60000,
					"max_age": "20s"
				}
			}
		]
	},
	"restapi" : {
		"swagger_name": "KoAgg - Test",
		"source_port": "8079",
		"output_port": "8080"
	},
	"rabbitmq" : {
		"url": "amqp://localhost"
	},
	"sources": [
		{
			"name": "banana_source",
			"store": "banana_store",
			"type": "restapi",
			"path": "/bananas"
		},
		{
			"name": "banana_mq",
			"store": "banana_store",
			"type": "rabbitmq",
			"queue": "test_queue"
		}
	],
	"outputs": [
		{
			"name": "bananapi",
			"store": "banana_store",
			"type": "restapi",
			"description": "Sum of bananas per user",
			"path": "/bananas",
			"aggregation": {
				"name": "sum_bananas",
				"key": "user_id",
				"field": "num_bananas",
				"action": "sum",
				"order_by": "sum_bananas",
				"invert": true
			},
			"time_options": {
				"field": "timestamp",
				"max_age": "10s"
			}
		},
		{
			"name": "bananapi_all",
			"store": "banana_store",
			"type": "restapi",
			"description": "Returns all bananas",
			"path": "/bananas/all"
		}
	]
}
